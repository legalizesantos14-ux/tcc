<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>PlanetHero App - Design Final</title>

<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">


<style>
/* ===========================
    ESTILO DO CONTAINER DO CELULAR
=========================== */
body {
    display: flex;
    justify-content: center;
    align-items: center;
    min-height: 100vh;
    margin: 0;
    background-color: #f0f2f5; 
    font-family: 'Poppins', sans-serif;
}

.phone-container {
    width: 375px; 
    height: 667px; 
    border: 5px solid #333; 
    border-radius: 40px; 
    box-shadow: 0 0 25px rgba(0, 0, 0, 0.5);
    background-color: white; 
    position: relative;
    overflow: hidden;
    padding: 0; 
    box-sizing: content-box;
    background: #000;
}

.screen {
    width: 100%;
    height: 100%;
    border-radius: 35px;
    background-color: var(--bg-light); 
    overflow: hidden;
    position: relative;
}

.notch { 
    width: 130px;
    height: 15px; 
    background: black;
    border-radius: 0 0 10px 10px;
    position: absolute;
    top: 0;
    left: 50%;
    transform: translateX(-50%);
    z-index: 100;
}

/* ===========================
    ESTILOS DO APLICATIVO (Design Aprimorado)
=========================== */
:root {
    --green-primary: #196f33; /* Verde Mais Escuro e Rico */
    --green-dark: #115024;    /* Para Bot√µes */
    --bg-light: #F8F8F8;      /* Fundo muito leve */
    --text-dark: #2c2c2c;
    --text-primary: #196f33;
    --card-bg: #FFFFFF;
    --card-shadow: 0 6px 15px rgba(0,0,0,0.1); /* Sombra mais elegante */
    --icon-size: 26px;
    --red-alert: #CC0000;
}

/* Base das p√°ginas */
.page {
    display: none;
    width: 100%;
    height: 100%; 
    overflow-y: auto;
    padding-bottom: 10px; 
    background-color: var(--bg-light);
    position: absolute;
    top: 0;
    left: 0;
    color: var(--text-dark);
}

.page.has-navbar {
    height: calc(100% - 60px); 
    padding-bottom: 10px; 
}

.page.active {
    display: block; 
}

/* Auth Pages (Login/Cadastro) */
#login, #cadastro {
    display: none; 
    flex-direction: column;
    align-items: center;
    justify-content: center;
    height: 100%; 
    overflow-y: hidden; 
    padding: 0 30px;
    box-sizing: border-box;
    background-color: var(--bg-light); 
    text-align: center;
}
#login.active, #cadastro.active {
    display: flex; 
}

.auth-input-group {
    display: flex;
    align-items: center;
    width: 100%;
    margin-bottom: 15px;
    background-color: white;
    border-radius: 10px;
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
}
.auth-input-group span {
    color: var(--green-primary);
    padding: 0 10px;
}
.auth-input-group input {
    border: none;
    padding: 12px 0;
    font-size: 14px;
    flex-grow: 1;
    background: transparent;
    outline: none;
}
.auth-logo {
    font-size: 28px;
    font-weight: 700;
    color: var(--green-dark);
    margin-bottom: 10px;
}
.auth-title {
    font-size: 20px;
    color: var(--text-dark);
    margin-bottom: 30px;
    font-weight: 600;
}
.auth-link {
    font-size: 13px;
    color: #555;
    margin-top: 15px;
    cursor: pointer;
}


/* Cabe√ßalho */
.header {
    background-color: var(--green-primary);
    color: white;
    padding: 15px 0;
    text-align: center;
    font-size: 20px;
    font-weight: 700;
    position: sticky;
    top: 0;
    z-index: 5;
    padding-top: 30px; 
    box-shadow: 0 2px 8px rgba(0,0,0,0.2);
    border-radius: 0 0 20px 20px; 
}

.header-back {
    position: absolute;
    left: 15px;
    top: 50%;
    transform: translateY(-50%);
    color: white;
    text-decoration: none;
    font-size: 28px;
    font-weight: normal;
}

/* Cards de Conte√∫do (Geral) */
.card {
    background-color: var(--card-bg);
    border-radius: 20px; 
    padding: 20px;
    margin: 15px;
    box-shadow: var(--card-shadow);
    line-height: 1.5;
}

.section-title {
    color: var(--text-dark); 
    font-weight: 700;
    font-size: 18px;
    margin: 25px 15px 10px 15px;
    border-left: 5px solid var(--green-primary);
    padding-left: 10px;
}

/* HOME PAGE - Checklist Unificado */
.checklist-card {
    padding-top: 5px;
}

.checklist-item {
    display: flex;
    align-items: center;
    justify-content: space-between; 
    padding: 12px 10px;
    cursor: pointer;
    border-bottom: 1px solid #f0f0f0;
    border-radius: 8px;
    transition: background-color 0.2s;
}
.checklist-item:hover {
    background-color: #f7f7f7;
}
.checklist-item:last-child {
    border-bottom: none;
}

/* (estilos de input e label mantidos, mas movidos para o final para n√£o quebrar) */
.checklist-item input[type="checkbox"] {
    appearance: none;
    width: 22px;
    height: 22px;
    border: 2px solid var(--green-primary);
    border-radius: 6px;
    margin-right: 15px;
    cursor: pointer;
    position: relative;
    flex-shrink: 0;
}

.checklist-item input[type="checkbox"]:checked {
    background-color: var(--green-primary);
    border-color: var(--green-primary);
}

.checklist-item input[type="checkbox"]:checked::after {
    content: '‚úî';
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    color: white;
    font-size: 14px;
}

.checklist-item img {
    width: 30px; 
    height: 30px;
    margin-right: 10px;
    border-radius: 50%;
    padding: 5px;
    background-color: var(--bg-light);
    box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    flex-shrink: 0;
}

.checklist-item label {
    flex-grow: 1;
    font-size: 14px;
    color: var(--text-dark);
}

.points-label {
    font-size: 12px;
    font-weight: 600;
    color: var(--green-dark);
    background-color: #e6ffe6; /* Fundo mais claro para destaque */
    padding: 3px 8px;
    border-radius: 10px;
    flex-shrink: 0;
}

/* Bot√£o de Envio/A√ß√£o Principal */
.submit-btn {
    background-color: var(--green-dark);
    color: white;
    border: none;
    padding: 15px;
    border-radius: 15px; 
    font-weight: 700;
    width: calc(100% - 30px);
    margin: 15px;
    cursor: pointer;
    box-shadow: 0 5px 12px rgba(0, 0, 0, 0.3);
    transition: background-color 0.3s;
}
.submit-btn:active {
    background-color: var(--green-primary);
}

/* ===========================
    ESTILOS ESPEC√çFICOS POR P√ÅGINA
=========================== */

/* Conte√∫dos Educativos */
.educational-content-card {
    text-align: center;
    cursor: pointer;
    font-weight: 600;
    color: var(--text-primary);
    padding: 25px 15px;
    font-size: 16px;
    transition: transform 0.2s;
}
.educational-content-card:active {
    transform: translateY(2px);
}

.content-card-detail {
    display: flex;
    align-items: center;
    margin-bottom: 20px;
    padding-bottom: 15px;
    border-bottom: 1px solid #eee;
}
.content-card-detail:last-child {
    border-bottom: none;
    margin-bottom: 0;
    padding-bottom: 0;
}
.content-card-detail img {
    width: 50px;
    height: 50px;
    margin-right: 15px;
    flex-shrink: 0;
}
.content-card-detail h3 {
    margin: 0 0 5px 0;
    font-size: 15px;
    color: var(--green-dark);
}
.content-card-detail p {
    margin: 0;
    font-size: 13px;
    color: #555;
}


/* Conquista */
.achievement-level {
    text-align: center;
    padding: 30px 20px;
    margin: 25px 15px 15px 15px;
    background: linear-gradient(145deg, var(--green-primary), var(--green-dark));
    color: white;
    border-radius: 20px;
    box-shadow: var(--card-shadow);
    position: relative; /* Para posicionar o √≠cone ? */
}
.level-badge {
    font-size: 40px;
    font-weight: 700;
    line-height: 1;
    margin-bottom: 5px;
}
.level-title {
    font-size: 18px;
    font-weight: 600;
    margin-bottom: 10px;
    display: flex;
    align-items: center;
    justify-content: center;
}
.points-value {
    font-size: 14px;
    opacity: 0.8;
}
.level-table-icon {
    position: absolute;
    top: 15px;
    right: 15px;
    font-size: 24px;
    cursor: pointer;
    background: rgba(255, 255, 255, 0.2);
    border-radius: 50%;
    width: 30px;
    height: 30px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: 700;
}

.achievement-button {
    display: flex;
    align-items: center;
    width: calc(100% - 30px);
    margin: 15px;
    padding: 15px;
    background-color: var(--card-bg);
    border: none;
    border-radius: 15px;
    box-shadow: var(--card-shadow);
    text-align: left;
    font-size: 16px;
    font-weight: 600;
    color: var(--text-dark);
    cursor: pointer;
    transition: background-color 0.2s;
}
.achievement-button:hover {
    background-color: #f0f0f0;
}
.achievement-button img {
    width: 30px;
    height: 30px;
    margin-right: 15px;
    filter: invert(20%) sepia(35%) saturate(1000%) hue-rotate(100deg) brightness(80%); /* Tonalidade verde */
}


/* Ranking */
.ranking-list {
    list-style: none;
    padding: 0;
    margin: 15px;
}
.ranking-item {
    display: flex;
    align-items: center;
    justify-content: space-between;
    background-color: var(--card-bg);
    padding: 15px;
    margin-bottom: 10px;
    border-radius: 15px;
    box-shadow: 0 3px 8px rgba(0,0,0,0.1);
    font-size: 15px;
    font-weight: 600;
}
.ranking-item.user-highlight {
    border: 2px solid var(--green-primary);
    background-color: #e6ffe6;
}
.rank-number {
    font-size: 18px;
    font-weight: 700;
    color: var(--green-dark);
    width: 30px;
    text-align: center;
}
.rank-info {
    display: flex;
    align-items: center;
    flex-grow: 1;
    margin-left: 10px;
}
.rank-avatar {
    width: 40px;
    height: 40px;
    border-radius: 50%;
    margin-right: 10px;
}
.rank-points {
    color: var(--text-primary);
    font-weight: 700;
}

/* Medalhas */
#medalhas-container {
    padding: 15px;
}
.medal-item {
    display: flex;
    align-items: center;
    background-color: var(--card-bg);
    padding: 15px;
    margin-bottom: 10px;
    border-radius: 15px;
    box-shadow: 0 3px 8px rgba(0,0,0,0.1);
    font-size: 15px;
    font-weight: 600;
    color: var(--text-dark);
}
.medal-item img {
    width: 50px;
    height: 50px;
    margin-right: 15px;
    flex-shrink: 0;
}


/* Perfil */
.profile-info {
    text-align: center;
    padding-top: 30px;
    /* AUMENTADO: Espa√ßamento para afastar do card de resumo */
    padding-bottom: 40px; 
    background-color: var(--green-primary);
    color: white;
    /* Redefinido para o padr√£o (pode ser removido, mas mantenho para clareza) */
    margin-bottom: 0; 
    border-radius: 0 0 25px 25px; 
    box-shadow: 0 5px 10px rgba(0,0,0,0.2);
}
.profile-avatar {
    /* Adicionado estilo para o avatar */
    width: 70px;
    height: 70px;
    margin: 0 auto 10px auto; 
    background-color: rgba(255, 255, 255, 0.2);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
}
.profile-name {
    font-size: 18px;
    font-weight: 700;
    margin: 0;
}
.profile-email {
    font-size: 14px;
    opacity: 0.8;
    margin: 5px 0 0 0;
}
.summary-item {
    display: flex;
    justify-content: space-between;
    padding: 10px 0;
    border-bottom: 1px solid #f0f0f0;
    font-size: 15px;
}
.summary-item:last-child {
    border-bottom: none;
}
.summary-item span:nth-child(2) {
    font-weight: 600;
    color: var(--green-dark);
}

.feedback-button {
    display: flex;
    align-items: center;
    justify-content: space-between;
    width: calc(100% - 30px);
    margin: 15px;
    padding: 15px;
    background-color: var(--card-bg);
    border: none;
    border-radius: 15px;
    box-shadow: var(--card-shadow);
    text-align: left;
    font-size: 16px;
    font-weight: 600;
    color: var(--text-dark);
    cursor: pointer;
    transition: background-color 0.2s;
}
.feedback-button:hover {
    background-color: #f0f0f0;
}

/* Tabela de N√≠veis (Estilo de lista de cart√µes) */
.level-card-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    background-color: var(--card-bg);
    padding: 15px 20px;
    margin-bottom: 10px;
    border-radius: 15px;
    box-shadow: 0 3px 8px rgba(0,0,0,0.1);
    font-size: 16px;
    font-weight: 600;
    color: var(--text-dark);
}
.level-card-item span:nth-child(2) {
    color: var(--green-dark);
    font-weight: 700;
}


/* ===========================
    NAVBAR
=========================== */
.navbar {
    position: absolute;
    bottom: 0;
    left: 0;
    width: 100%;
    height: 60px;
    background: var(--card-bg);
    display: flex;
    justify-content: space-around;
    align-items: center;
    box-shadow: 0 -4px 10px rgba(0,0,0,0.1);
    border-top: 1px solid #eee;
    z-index: 20; 
    display: none; 
}

.nav-item {
    text-align: center;
    cursor: pointer;
    padding: 5px;
    transition: color 0.3s;
}

.nav-item .material-icons {
    width: var(--icon-size);
    height: var(--icon-size);
    font-size: var(--icon-size);
    color: #888;
    transition: color 0.3s;
}

.nav-item.active .material-icons {
    color: var(--green-primary);
}
</style>
</head>
<body>

<div class="phone-container">
    <div class="screen">
        <div class="notch"></div>

        <div id="login" class="page auth-page">
            <div class="auth-logo">PLANETHERO</div>
            <div class="auth-title">LOGIN</div>

            <p id="login-error" class="auth-error" style="display:none; color: red;">Email ou senha inv√°lidos.</p>

            <div class="auth-input-group">
                <span class="material-icons">person</span>
                <input type="text" id="login-email-username" placeholder="email ou nome de usu√°rio:">
            </div>

            <div class="auth-input-group">
                <span class="material-icons">lock</span>
                <input type="password" id="login-senha" placeholder="senha">
            </div>

            <button class="submit-btn" onclick="handleLogin()">ENTRAR</button>

            <p class="auth-link" onclick="go('cadastro')">criar uma conta? clique aqui</p>
        </div>

        <div id="cadastro" class="page auth-page">
            <div class="auth-logo">PLANETHERO</div>
            <div class="auth-title">CADASTRO</div>

            <p id="cadastro-error" class="auth-error" style="display:none; color: red;">Por favor, preencha todos os campos.</p>

            <div class="auth-input-group">
                <span class="material-icons">email</span>
                <input type="email" id="cadastro-email" placeholder="email :">
            </div>

            <div class="auth-input-group">
                <span class="material-icons">person</span>
                <input type="text" id="cadastro-nome" placeholder="nome de usu√°rio:">
            </div>

            <div class="auth-input-group">
                <span class="material-icons">lock</span>
                <input type="password" id="cadastro-senha" placeholder="senha">
            </div>

            <button class="submit-btn" onclick="handleCadastro()">CADASTRAR</button>
            <p class="auth-link" onclick="go('login')">J√° tem uma conta? Voltar para o Login</p>
        </div>


        <div id="home" class="page has-navbar">
            <div class="header">PLANETHERO</div>
            
            <h3 class="section-title">üå± Suas Miss√µes</h3>
            <div class="card checklist-card">
                <div id="checklist-container">
                    
                    <h4 style="color: var(--green-dark); margin: 0 0 10px 0; font-size: 16px;">Di√°rias</h4>
                    <div class="checklist-item">
                        <input type="checkbox" id="daily1" class="task" data-points="15" data-frequency="daily">
                        <img src="https://cdn-icons-png.freepik.com/256/1015/1015322.png?semt=ais_white_label" alt="Economizar Energia">
                        <label for="daily1">Economizar Energia</label>
                        <span class="points-label">15 pts</span>
                    </div>
                    <div class="checklist-item">
                        <input type="checkbox" id="daily2" class="task" data-points="20" data-frequency="daily">
                        <img src="https://cdn-icons-png.flaticon.com/512/635/635705.png" alt="Transporte P√∫blico">
                        <label for="daily2">Usar Transporte P√∫blico</label>
                        <span class="points-label">20 pts</span>
                    </div>
                    
                    <hr style="border: 0; border-top: 1px solid #eee; margin: 15px 0;">
                    
                    <h4 style="color: var(--green-dark); margin: 10px 0; font-size: 16px;">Semanais</h4>
                    <div class="checklist-item">
                        <input type="checkbox" id="weekly1" class="task" data-points="100" data-frequency="weekly">
                        <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTOBmCaS5plrtkBbIW3kAY6xJ3F-6ZU0xZdTw&s" alt="A√ß√£o Ambiental">
                        <label for="weekly1">Participar de A√ß√£o Ambiental</label>
                        <span class="points-label">100 pts</span>
                    </div>
                    <div class="checklist-item">
                        <input type="checkbox" id="weekly2" class="task" data-points="50" data-frequency="weekly">
                        <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSVcAHUiyd1D7Qlcgm0GQ2N2RbbJ4pbHGQLWw&s" alt="Consumo">
                        <label for="weekly2">Evitar Consumo Desnecess√°rio</label>
                        <span class="points-label">50 pts</span>
                    </div>
                    <div class="checklist-item">
                        <input type="checkbox" id="weekly3" class="task" data-points="75" data-frequency="weekly">
                        <img src="https://img.freepik.com/vetores-gratis/ilustracao-de-protecao-ambiental-desenhada-a-mao_23-2150089571.jpg?semt=ais_hybrid&w=740&q=80" alt="H√°bito Ecol√≥gico">
                        <label for="weekly3">Adotar um H√°bito Ecol√≥gico</label>
                        <span class="points-label">75 pts</span>
                    </div>
                    <div class="checklist-item">
                        <input type="checkbox" id="weekly4" class="task" data-points="30" data-frequency="weekly">
                        <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQaQe9IX_wdPL00OK3GlJh_QLaxJObxx-Xtxg&s" alt="Reduzir Pl√°stico">
                        <label for="weekly4">Reduzir Consumo de Pl√°stico</label>
                        <span class="points-label">30 pts</span>
                    </div>
                </div>
            </div>

            <button class="submit-btn" onclick="enviarChecklist()">ENVIAR CHECKLIST</button>
            
            <h3 class="section-title">üìö Conte√∫dos Educativos</h3>
            <div class="card educational-content-card" onclick="go('conteudos-educativos')">
                Aprenda a Salvar o Planeta!
            </div>
            
        </div>

        <div id="conteudos-educativos" class="page has-navbar">
            <div class="header"><a href="#" class="header-back" onclick="go('home')">‚Üê</a> Conte√∫dos Educativos</div>
            <div class="card" style="margin-top: 25px;">
                <div class="content-card-detail">
                    <img src="https://cdn-icons-png.flaticon.com/512/11926/11926677.png" alt="Consumo Consciente">
                    <div class="content-text">
                        <h3>CONSUMO CONSCIENTE</h3>
                        <p>Compre apenas o necess√°rio e evite o excesso.</p>
                        <p>Dica: Use sacolas reutiliz√°veis!</p>
                    </div>
                </div>
                
                <div class="content-card-detail">
                    <img src="https://cdn-icons-png.flaticon.com/512/13179/13179422.png" alt="Mudan√ßas Clim√°ticas">
                    <div class="content-text">
                        <h3>MUDAN√áAS CLIM√ÅTICAS</h3>
                        <p>Altera√ß√µes no clima devido √† polui√ß√£o.</p>
                        <p>Dica: Menos carro, mais bicicleta = Menos polui√ß√£o!</p>
                    </div>
                </div>

                <div class="content-card-detail">
                    <img src="https://cdn-icons-png.flaticon.com/512/3320/3320628.png  " alt="Reciclagem">
                    <div class="content-text">
                        <h3>RECICLAGEM</h3>
                        <p>Separe o lixo para reutilizar e economizar recursos.</p>
                        <p>Fato: Reciclar 1 lata economiza 95% da energia.</p>
                    </div>
                </div>
            </div>
        </div>
        
        <div id="conquista" class="page has-navbar">
            <div class="header">CONQUISTA</div>

            <div class="achievement-level">
                <div class="level-table-icon" onclick="go('nivel-tabela')">?</div> 
                <div class="level-badge" id="current-level">N/A</div>
                <div class="level-title" id="current-level-title">Carregando...</div>
                
                <div class="points-value" id="current-points-status">0 pontos para o pr√≥ximo n√≠vel</div> 
            </div>
            
            <button class="achievement-button" onclick="go('medalhas-detalhe')">
                <img src="https://cdn-icons-png.flaticon.com/512/190/190411.png" alt="Medalhas">
                Minhas Medalhas
            </button>

            <button class="achievement-button" onclick="go('ranking-detalhe')">
                <img src="https://cdn-icons-png.flaticon.com/512/983/983865.png" alt="Ranking">
                Ver Ranking Global
            </button>
        </div>

        <div id="ranking-detalhe" class="page has-navbar">
            <div class="header"><a href="#" class="header-back" onclick="go('conquista')">‚Üê</a> Ranking Global</div>
            <ul class="ranking-list" id="ranking-container">
                </ul>
        </div>

        <div id="nivel-tabela" class="page has-navbar">
            <div class="header"><a href="#" class="header-back" onclick="go('conquista')">‚Üê</a> Tabela de N√≠veis</div>
            <div class="card" style="margin-top: 25px;">
                <h3 style="color: var(--text-primary); margin-top: 0; text-align: center;">Pontua√ß√£o Necess√°ria</h3>
                <div id="level-table-container">
                    </div>
            </div>
        </div>

        <div id="medalhas-detalhe" class="page has-navbar">
            <div class="header"><a href="#" class="header-back" onclick="go('conquista')">‚Üê</a> Minhas Medalhas</div>
            <div class="ranking-list" id="medalhas-container">
                 </div>
        </div>

        <div id="perfil" class="page has-navbar">
            <div class="header">PERFIL</div>

            <div class="profile-info">
                <div class="profile-avatar">
                    <span class="material-icons" style="font-size: 48px;">person</span>
                </div>
                <p class="profile-name" id="profile-name">Nome do Usu√°rio</p>
                <p class="profile-email" id="profile-email">email@exemplo.com</p>
            </div>

            <div class="card" style="margin-top: 50px;">
                <h3 style="color: var(--text-dark); margin-top: 0;">üìä Resumo</h3>
                <div class="summary-item">
                    <span>Pontos Acumulados</span>
                    <span id="total-points-display">0</span> 
                </div>
                <div class="summary-item">
                    <span>N√≠vel Atual</span>
                    <span id="profile-level">N/A</span> 
                </div>
            </div>
            
            <button class="feedback-button" onclick="go('feedback')">
                Feedback e Sugest√µes
                <span class="material-icons" style="font-size: 24px; color: var(--text-primary);">chevron_right</span>
            </button>

            <button class="submit-btn" style="background-color: var(--red-alert); margin-top: 20px;" onclick="handleLogout()">SAIR</button>
        </div>

        <div id="feedback" class="page has-navbar">
            <div class="header"><a href="#" class="header-back" onclick="go('perfil')">‚Üê</a> Feedback</div>
            
            <div class="card" style="margin-top: 25px;">
                <h3 style="color: var(--text-primary); text-align:center; margin-top: 0;">Envie sua sugest√£o!</h3>
                <textarea id="feedback-text" rows="5" style="width:100%; border:1px solid #ccc; border-radius:10px; padding:10px; box-sizing:border-box; font-family: 'Poppins', sans-serif;" placeholder="Digite seu feedback ou sugest√£o. Ajude-nos a salvar o planeta!"></textarea>
                <button class="submit-btn" style="width:100%; margin: 10px 0 0 0; background-color: var(--green-dark);" onclick="sendFeedback()">ENVIAR</button>
            </div>

            <div id="feedback-success" style="display:none; position:fixed; top:50%; left:50%; transform:translate(-50%, -50%); background-color:white; padding:30px; border-radius:10px; box-shadow:0 5px 15px rgba(0,0,0,0.5); text-align:center; z-index: 50;">
                <p style="color: var(--text-primary); font-weight:700;">Obrigado pelo feedback, agradecemos pela sua colabora√ß√£o!</p>
                <button class="submit-btn" style="width:100px; margin-top:10px;" onclick="closeFeedbackSuccess()">OK</button>
            </div>
        </div>

        <div class="navbar">
            <div class="nav-item active" data-page="home" onclick="go('home', this)">
                <span class="material-icons">home</span>
            </div>
            <div class="nav-item" data-page="conquista" onclick="go('conquista', this)">
                <span class="material-icons">military_tech</span>
            </div>
            <div class="nav-item" data-page="perfil" onclick="go('perfil', this)">
                <span class="material-icons">person</span>
            </div>
        </div>
    </div>
</div>

<script>
    // Vari√°veis globais
    let currentScore = 0;
    let completedTasks = {}; // { taskId: true/false }
    let USER_DATA = null; 
    let LOGGED_IN = false;
    
    // Vari√°veis de controle de reset de tarefas (usando o formato YYYY-MM-DD)
    let lastDailyReset = localStorage.getItem('lastDailyReset') || new Date(0).toISOString().split('T')[0];
    let lastWeeklyReset = localStorage.getItem('lastWeeklyReset') || new Date(0).toISOString().split('T')[0];
    
    // Configura√ß√£o de N√≠veis (AJUSTADA para a sua imagem de tabela)
    const LEVEL_CONFIG = [
        { level: 1, points: 0, title: "Semente Verde" },
        { level: 2, points: 500, title: "Broto Consciente" },
        { level: 3, points: 1000, title: "Guardi√£o da Terra" },
        { level: 4, points: 1500, title: "Her√≥i Ecol√≥gico" },
        { level: 5, points: 2000, title: "Lenda do Planeta" }
    ];

    const MEDAL_CONFIG = [
        { id: 1, name: "Eco-Iniciante", requiredPoints: 100, icon: "https://cdn-icons-png.flaticon.com/512/190/190411.png" },
        { id: 2, name: "M√£os na Terra", requiredPoints: 500, icon: "https://cdn-icons-png.flaticon.com/512/190/190412.png" },
        { id: 3, name: "Mestre Verde", requiredPoints: 1500, icon: "https://cdn-icons-png.flaticon.com/512/190/190413.png" },
    ];
    
    // Dados Fict√≠cios para Ranking
    const FIXED_RANKING_DATA = [
        { nome: "Melisa", score: 3500, avatar: "https://cdn-icons-png.flaticon.com/512/4140/4140047.png" },
        { nome: "Pedro", score: 2800, avatar: "https://cdn-icons-png.flaticon.com/512/4140/4140048.png" },
        { nome: "Rafaela", score: 2000, avatar: "https://cdn-icons-png.flaticon.com/512/4140/4140049.png" },
        { nome: "Felipe", score: 1800, avatar: "https://cdn-icons-png.flaticon.com/512/4140/4140050.png" },
    ];
    
    // Fun√ß√£o principal de navega√ß√£o
    function go(pageId, navItem = null) {
        
        if (!LOGGED_IN && pageId !== 'login' && pageId !== 'cadastro') {
            pageId = 'login';
        }

        document.querySelectorAll(".page").forEach(p => p.classList.remove("active"));
        
        const targetPage = document.getElementById(pageId);
        if (targetPage) {
            targetPage.classList.add("active");
            targetPage.scrollTop = 0;
        }

        const isAppPage = targetPage && targetPage.classList.contains('has-navbar');
        document.querySelector('.navbar').style.display = isAppPage ? 'flex' : 'none';

        if (LOGGED_IN) {
            if (pageId === 'home') { loadChecklistState(); }
            if (pageId === 'perfil') { updateProfileDisplay(); updateScoreDisplay(); }
            if (pageId === 'conquista') { updateScoreDisplay(); }
            if (pageId === 'ranking-detalhe') { renderRanking(); }
            if (pageId === 'medalhas-detalhe') { renderMedals(); }
            if (pageId === 'nivel-tabela') { renderLevelTable(); } // Novo
        }
        
        document.querySelectorAll(".nav-item").forEach(item => { item.classList.remove("active"); });
        
        if (navItem) {
            navItem.classList.add('active');
        } else if (isAppPage) {
            document.querySelectorAll(".nav-item").forEach(item => {
                if (item.dataset.page === pageId || 
                   (['ranking-detalhe', 'medalhas-detalhe', 'nivel-tabela'].includes(pageId) && item.dataset.page === 'conquista') ||
                   (pageId === 'feedback' && item.dataset.page === 'perfil') ||
                   (pageId === 'conteudos-educativos' && item.dataset.page === 'home')) {
                    item.classList.add('active');
                }
            });
        }
    }


    // ===========================
    // L√ìGICA DE PERSIST√äNCIA E LOGIN
    // ===========================

    function saveUserState(userData) {
        const key = userData.nome || userData.email;
        const allUsersData = JSON.parse(localStorage.getItem('allPlanetHeroUsers')) || {};
        
        allUsersData[key] = {
            email: userData.email,
            nome: userData.nome,
            senha: userData.senha,
            score: currentScore,
            completedTasks: completedTasks
        };
        
        localStorage.setItem('allPlanetHeroUsers', JSON.stringify(allUsersData));
        localStorage.setItem('currentUserKey', key);
        
        // Salva as datas de reset junto com o estado do usu√°rio
        localStorage.setItem('lastDailyReset', lastDailyReset);
        localStorage.setItem('lastWeeklyReset', lastWeeklyReset);
    }

    function loadUserState(input) {
        const allUsersData = JSON.parse(localStorage.getItem('allPlanetHeroUsers')) || {};
        let state = allUsersData[input];
        
        if (!state) {
            for (const key in allUsersData) {
                if (allUsersData[key].email === input || allUsersData[key].nome === input) {
                    state = allUsersData[key];
                    break;
                }
            }
        }

        if (state) {
            currentScore = state.score;
            completedTasks = state.completedTasks || {}; 
            USER_DATA = { email: state.email, nome: state.nome, senha: state.senha };
            LOGGED_IN = true;
            
            // Carrega as datas de reset
            lastDailyReset = localStorage.getItem('lastDailyReset') || new Date(0).toISOString().split('T')[0];
            lastWeeklyReset = localStorage.getItem('lastWeeklyReset') || new Date(0).toISOString().split('T')[0];
            
            return true;
        }
        return false;
    }

    function handleCadastro() {
        const email = document.getElementById('cadastro-email').value.trim();
        const nome = document.getElementById('cadastro-nome').value.trim();
        const senha = document.getElementById('cadastro-senha').value;
        const errorBox = document.getElementById('cadastro-error');
        errorBox.style.display = 'none';

        if (!email || !nome || !senha) {
            errorBox.textContent = "Por favor, preencha todos os campos.";
            errorBox.style.display = 'block';
            return;
        }
        
        const allUsersData = JSON.parse(localStorage.getItem('allPlanetHeroUsers')) || {};
        if (allUsersData[nome] || Object.values(allUsersData).some(u => u.email === email)) {
            errorBox.textContent = "Nome de usu√°rio ou email j√° cadastrado.";
            errorBox.style.display = 'block';
            return;
        }

        currentScore = 0;
        completedTasks = {};
        lastDailyReset = new Date().toISOString().split('T')[0];
        lastWeeklyReset = new Date().toISOString().split('T')[0];
        const newUserData = { email, nome, senha };
        
        saveUserState(newUserData); 
        
        alert(`Cadastro realizado com sucesso, ${nome}! Agora fa√ßa o login.`);
        go('login');
    }

    function handleLogin() {
        const input = document.getElementById('login-email-username').value.trim();
        const senha = document.getElementById('login-senha').value;
        const errorBox = document.getElementById('login-error');
        errorBox.style.display = 'none';

        if (!input || !senha) {
            errorBox.textContent = "Por favor, preencha todos os campos.";
            errorBox.style.display = 'block';
            return;
        }

        const userLoaded = loadUserState(input); 

        if (userLoaded && USER_DATA.senha === senha) {
            go('home', document.querySelector('.nav-item[data-page="home"]'));
        } else {
            errorBox.textContent = "Email/Usu√°rio ou senha inv√°lidos.";
            errorBox.style.display = 'block';
            LOGGED_IN = false;
            USER_DATA = null;
        }
    }

    function handleLogout() {
        if (LOGGED_IN && USER_DATA) { saveUserState(USER_DATA); }
        LOGGED_IN = false;
        USER_DATA = null;
        localStorage.removeItem('currentUserKey');
        go('login'); 
    }

    function updateProfileDisplay() {
        if (USER_DATA) {
            document.getElementById('profile-name').textContent = USER_DATA.nome;
            document.getElementById('profile-email').textContent = USER_DATA.email;
        }
    }


    // ===========================
    // L√ìGICA DE CHECKLIST/SCORE/CONQUISTA E RESET
    // ===========================

    // Verifica se √© um novo dia (reseta Daily)
    function isNewDay(lastDate) {
        const today = new Date().toISOString().split('T')[0];
        return today !== lastDate;
    }

    // Verifica se 7 dias se passaram (reseta Weekly)
    function isNewWeek(lastDate) {
        const today = new Date();
        const last = new Date(lastDate);
        // Calcular a diferen√ßa em dias
        const oneDay = 24 * 60 * 60 * 1000;
        const diffDays = Math.round(Math.abs((today.getTime() - last.getTime()) / oneDay));
        return diffDays >= 7; 
    }
    
    function loadChecklistState() {
        if (!LOGGED_IN) return; 

        const todayDateStr = new Date().toISOString().split('T')[0];

        // --- L√≥gica de Reset Di√°rio ---
        if (isNewDay(lastDailyReset)) {
            document.querySelectorAll(".task[data-frequency='daily']").forEach(t => {
                delete completedTasks[t.id];
            });
            localStorage.setItem('lastDailyReset', todayDateStr);
            lastDailyReset = todayDateStr;
        }

        // --- L√≥gica de Reset Semanal ---
        if (isNewWeek(lastWeeklyReset)) {
            document.querySelectorAll(".task[data-frequency='weekly']").forEach(t => {
                delete completedTasks[t.id];
            });
            localStorage.setItem('lastWeeklyReset', todayDateStr);
            lastWeeklyReset = todayDateStr;
        }
        
        // Atualiza o estado visual dos checkboxes
        const tasks = document.querySelectorAll("#checklist-container .task");
        tasks.forEach(t => {
            const taskId = t.id;
            const itemElement = t.closest('.checklist-item');

            if (completedTasks[taskId]) {
                t.checked = true;
                t.disabled = true; 
                itemElement.style.opacity = '0.6';
            } else {
                t.checked = false;
                t.disabled = false;
                itemElement.style.opacity = '1';
            }
        });
    }

    function enviarChecklist() {
        if (!LOGGED_IN) {
            alert("Voc√™ precisa estar logado para enviar o checklist.");
            return;
        }

        let tasks = document.querySelectorAll("#checklist-container .task");
        let totalPoints = 0;

        tasks.forEach(t => {
            const taskId = t.id;
            if (t.checked && !completedTasks[taskId]) {
                totalPoints += parseInt(t.dataset.points) || 0;
                completedTasks[taskId] = true; 
            }
        });

        if (totalPoints > 0) {
            currentScore += totalPoints;
            saveUserState(USER_DATA);
            // Notifica√ß√£o simples (conforme solicitado, removendo o feedback visual excessivo)
            alert(`Pontos ganhos: ${totalPoints}. Seu total agora √©: ${currentScore.toLocaleString('pt-BR')}.`); 
        } else {
             alert("Nenhuma nova tarefa conclu√≠da para ganhar pontos.");
        }
        
        loadChecklistState(); 
        updateScoreDisplay(); 

        document.getElementById('home').scrollTop = 0; 
    }

    function getCurrentLevel() {
        let currentLevel = LEVEL_CONFIG[0];
        let nextLevel = null;
        
        // Encontra o n√≠vel atual
        for (const level of LEVEL_CONFIG) {
            if (currentScore >= level.points) {
                currentLevel = level;
            } else {
                nextLevel = level;
                break;
            }
        }
        
        return { current: currentLevel, next: nextLevel };
    }

    function updateScoreDisplay() {
        const levelData = getCurrentLevel();
        
        const formattedScore = currentScore.toLocaleString('pt-BR');

        // Perfil
        const totalPointsDisplay = document.getElementById('total-points-display');
        if (totalPointsDisplay) totalPointsDisplay.textContent = formattedScore;

        const profileLevel = document.getElementById('profile-level');
        if (profileLevel) profileLevel.textContent = `N√≠vel ${levelData.current.level}`;

        // Conquista
        const currentLevel = document.getElementById('current-level');
        if (currentLevel) currentLevel.textContent = levelData.current.level;
        
        const currentLevelTitle = document.getElementById('current-level-title');
        if (currentLevelTitle) currentLevelTitle.textContent = levelData.current.title;

        const currentPointsStatus = document.getElementById('current-points-status');
        if (currentPointsStatus) {
            if (levelData.next) {
                const pointsNeeded = levelData.next.points - currentScore;
                currentPointsStatus.textContent = `${pointsNeeded.toLocaleString('pt-BR')} pontos para o N√≠vel ${levelData.next.level}`;
            } else {
                currentPointsStatus.textContent = `Parab√©ns! Voc√™ alcan√ßou o n√≠vel m√°ximo: ${levelData.current.level}`;
            }
        }
    }
    
    // ===========================
    // L√ìGICA DE RANKING, MEDALHAS E TABELA DE N√çVEIS
    // ===========================

    function renderLevelTable() {
        const container = document.getElementById('level-table-container');
        if (!container) return;
        
        container.innerHTML = '';
        
        // Renderiza do maior n√≠vel para o menor
        const reversedLevels = [...LEVEL_CONFIG].reverse();

        reversedLevels.forEach(level => {
            const item = document.createElement('div');
            item.className = 'level-card-item';
            
            item.innerHTML = `
                <span>N√≠vel ${level.level}</span>
                <span>${level.points.toLocaleString('pt-BR')} pontos</span>
            `;
            container.appendChild(item);
        });
    }

    function getFullRankingList() {
        let rankingList = [...FIXED_RANKING_DATA];
        
        if (USER_DATA) {
            // Se o usu√°rio est√° na lista fixa (apenas para simula√ß√£o), remove para evitar duplicidade antes de adicionar o score atual
            rankingList = rankingList.filter(u => u.nome !== USER_DATA.nome);
            rankingList.push({ 
                nome: USER_DATA.nome, 
                score: currentScore, 
                avatar: "https://cdn-icons-png.flaticon.com/512/456/456212.png" 
            });
        }
        
        rankingList.sort((a, b) => b.score - a.score);
        
        return rankingList;
    }

    function renderRanking() {
        const rankingContainer = document.getElementById('ranking-container');
        if (!rankingContainer) return;
        
        rankingContainer.innerHTML = '';
        
        const fullRanking = getFullRankingList();
        
        fullRanking.forEach((user, index) => {
            const rank = index + 1;
            const isCurrentUser = USER_DATA && user.nome === USER_DATA.nome && user.score === currentScore;
            
            const listItem = document.createElement('li');
            listItem.className = `ranking-item ${isCurrentUser ? 'user-highlight' : ''}`;
            
            listItem.innerHTML = `
                <span class="rank-number">${rank}¬∫</span>
                <div class="rank-info">
                    <img class="rank-avatar" src="${user.avatar}" alt="Avatar">
                    <span class="rank-name">${user.nome}</span>
                </div>
                <span class="rank-points">${user.score.toLocaleString('pt-BR')} pts</span>
            `;
            
            rankingContainer.appendChild(listItem);
        });
    }
    
    function renderMedals() {
        const medalsContainer = document.getElementById('medalhas-container');
        if (!medalsContainer) return;
        
        medalsContainer.innerHTML = '';
        
        const earnedMedals = MEDAL_CONFIG.filter(medal => currentScore >= medal.requiredPoints);
        const unearnedMedals = MEDAL_CONFIG.filter(medal => currentScore < medal.requiredPoints);

        if (earnedMedals.length > 0) {
            medalsContainer.innerHTML += '<h3 style="margin: 15px; color: var(--text-primary);">Conquistadas:</h3>';

            earnedMedals.forEach(medal => {
                const item = document.createElement('div');
                item.className = 'medal-item';
                item.innerHTML = `
                    <img src="${medal.icon}" alt="${medal.name}">
                    <span>${medal.name}</span>
                `;
                medalsContainer.appendChild(item);
            });
        }

        if (unearnedMedals.length > 0) {
            medalsContainer.innerHTML += '<h3 style="margin: 15px; color: #777;">Pr√≥ximas Medalhas:</h3>';
            
            unearnedMedals.forEach(medal => {
                const pointsNeeded = medal.requiredPoints - currentScore;
                const item = document.createElement('div');
                item.className = 'medal-item';
                item.style.opacity = '0.5';
                item.innerHTML = `
                    <img src="${medal.icon}" alt="${medal.name}" style="filter: grayscale(100%);">
                    <div>
                        <span>${medal.name}</span><br>
                        <span style="font-weight: 400; font-size: 13px; color: #777;">Faltam ${pointsNeeded.toLocaleString('pt-BR')} pontos</span>
                    </div>
                `;
                medalsContainer.appendChild(item);
            });
        }
        
        if (earnedMedals.length === 0 && unearnedMedals.length > 0) {
            medalsContainer.innerHTML = '<p style="text-align: center; padding: 20px; color: #555;">Continue ganhando pontos para desbloquear sua primeira medalha!</p>' + medalsContainer.innerHTML;
        }
    }
    
    // ===========================
    // L√ìGICA DE FEEDBACK
    // ===========================

    function sendFeedback() {
        const feedbackText = document.getElementById('feedback-text').value;
        if (feedbackText.trim() !== "") {
            document.getElementById('feedback-success').style.display = 'block';
            document.getElementById('feedback-text').value = '';
        } else {
            alert("Por favor, digite seu feedback ou sugest√£o.");
        }
    }

    function closeFeedbackSuccess() {
        document.getElementById('feedback-success').style.display = 'none';
        go('perfil');
    }

    // Inicializa a aplica√ß√£o
    document.addEventListener('DOMContentLoaded', () => {
        const lastUserKey = localStorage.getItem('currentUserKey');
        if (lastUserKey && loadUserState(lastUserKey)) {
            // Se carregar com sucesso, vai direto para a Home
            go('home', document.querySelector('.nav-item[data-page="home"]'));
        } else {
            // Se n√£o, vai para o login (estado default)
            go('login');
        }
    });
</script>

</body>
</html>

